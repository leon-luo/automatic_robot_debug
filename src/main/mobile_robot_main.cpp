/******************************************************************************

  版权所有 (C), 2017-2028 惠州市蓝微电子有限公司

 ******************************************************************************
  文件名称: mobile_robot_main.cpp
  版本编号: 初稿
  作     者: Leon
  生成日期: 2017年8月3日
  最近修改:
  功能描述   : 扫地机器人
  函数列表:
              main
  修改历史:
  1.日     期: 2017年8月3日
    作     者: Leon
    修改内容: 创建文件
******************************************************************************/

/******************************************************************************
 * 包含头文件
 ******************************************************************************/
#include <ros/ros.h>
#include <std_msgs/Int16.h>
#include <std_msgs/String.h>
#include <geometry_msgs/Twist.h>
#include "math.h"

#include "cfg_mobile_robot.h"
#include "debug_function.h"

/******************************************************************************
 * 外部变量声明
 ******************************************************************************/

/******************************************************************************
 * 外部函数声明
 ******************************************************************************/

/******************************************************************************
 * 全局变量
 ******************************************************************************/

/******************************************************************************
 * 宏定义
 ******************************************************************************/

/******************************************************************************
 * 常量声明
 ******************************************************************************/

/******************************************************************************
 * 枚举类型
 ******************************************************************************/

/******************************************************************************
 * 结构体类型
 ******************************************************************************/

/******************************************************************************
 * 类声明
 ******************************************************************************/

/******************************************************************************
 * 内部函数声明
 ******************************************************************************/

/*****************************************************************************
 函 数 名: main
 功能描述  : 主函数入口
 输入参数: int argc     
           char** argv  
 输出参数: 无
 返 回 值: 
 
 修改历史:
  1.日     期: 2017年8月11日
    作     者: Leon
    修改内容: 新生成函数
*****************************************************************************/
int main(int argc, char** argv)
{
	ros::init ( argc, argv, "cleaner_robot" );
	cfg_mobile_robot* p_instance = cfg_mobile_robot::get_instance();
	p_instance->print_version();
	p_instance->register_msgs_callback();

	while ( ros::ok() )
	{
		p_instance->function_processor();
		ros::spinOnce();
	}
	
	ROS_WARN ( "[%s():%d:]After while(ros::ok())", __FUNCTION__, __LINE__);
	ros::spin();//调用后不会再返回
	ROS_WARN ( "[%s():%d:]ros::spin();", __FUNCTION__, __LINE__);
	ros::shutdown();
	ROS_WARN ( "[%s():%d:]ros::shutdown();", __FUNCTION__, __LINE__);
	return 0;
}

