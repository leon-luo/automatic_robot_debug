/******************************************************************************

  版权所有 (C), 2017-2028, _ _ _ Co., Ltd.

 ******************************************************************************
  文件名称: pid.h
  版本编号: 初稿
  作     者: Leon
  生成日期: 2017年11月18日
  最近修改:
  功能描述: pid.cpp 的头文件
  函数列表:
  修改历史:
  1.日     期: 2017年11月18日
    作     者: Leon
    修改内容: 创建文件
******************************************************************************/
#ifndef __PID_H__
#define __PID_H__

/*****************************************************************************/
#ifdef __cplusplus
#if __cplusplus
//extern "C"{
#endif
#endif /* __cplusplus */
/*****************************************************************************/

/******************************************************************************
 * 包含头文件
 ******************************************************************************/
#include <iostream>
#include <unistd.h>
#include <inttypes.h>

/******************************************************************************
 * 外部变量声明
 ******************************************************************************/

/******************************************************************************
 * 外部函数声明
 ******************************************************************************/

/******************************************************************************
 * 全局变量
 ******************************************************************************/

/******************************************************************************
 * 宏定义
 ******************************************************************************/

/******************************************************************************
 * 常量声明
 ******************************************************************************/

/******************************************************************************
 * 枚举类型
 ******************************************************************************/

/******************************************************************************
 * 结构体类型
 ******************************************************************************/
typedef struct PID
{
	double goal_value;               // 设定目标 desired value
	double proportion;               // 比例常数 proportional const
	double integral;                 // 积分常数 integral const
	double derivative;               // 微分常数 derivative const
	double last_error;               // error[-1]
	double prev_error;               // error[-2]
	double sum_error;                // sums of errors
}PID_STRU;

/******************************************************************************
 * 类声明
 ******************************************************************************/
class pid
{
public:
	pid();
	~pid();

	void set_pid_goal_value(double value);
	double get_pid_goal_value(void);

	void set_pid_proportion(double value);
	double get_pid_proportion(void);
	
	void set_pid_integral(double value);
	double get_pid_integral(void);
	
	void set_pid_derivative(double value);
	double get_pid_derivative(void);

	void set_pid(PID_STRU pid);
	void get_pid(PID_STRU &pid);

	void init_pid(PID_STRU pid);

	double pid_calc(PID_STRU &p_pid, double value);

	void print_pid_data(void);
	
private:
	PID_STRU pid_;
};

/******************************************************************************
 * 内部函数声明
 ******************************************************************************/



/*****************************************************************************/
#ifdef __cplusplus
#if __cplusplus
//}
#endif
#endif /* __cplusplus */
/*****************************************************************************/

#endif /* __PID_H__ */
